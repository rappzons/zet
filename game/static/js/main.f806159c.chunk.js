(this.webpackJsonpzet=this.webpackJsonpzet||[]).push([[0],{1484:function(e,t,a){},1485:function(e,t,a){"use strict";a.r(t);var s=a(82),i=a.n(s),r=a(558),n=a.n(r),l=(a(565),a(61)),o=a.n(l),c=function(e,t){var a={type:o.a.AUTO,width:1600,height:800,backgroundColor:"#030303",parent:e,physics:{default:"matter",matter:{debug:!0}},scene:t};return new o.a.Game(a)},d=a(101),h=a(102),m=a(105),u=a(104),y=a(103),p=a(106),g=a(559),b=function(e,t,a,s){this.x=e,this.y=t,this.width=a,this.height=s,this.containsPoint=function(e){return this.x<=e.x&&e.x<=this.x+this.width&&this.y<=e.y&&e.y<=this.y+this.height},this.intersects=function(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y+this.height>e.y&&this.y<e.y+e.height},this.intersectsBounds=function(e){var t={x:e.min.x,y:e.min.y,width:e.max.x-e.min.x,height:e.max.y-e.min.y};return this.intersects(t)}},f=function(e,t){return Math.floor(Math.random()*(t-e))+e},v={spriteSheet:"./assets/sprites/adventure-player.png",width:50,height:37,hitBoxWidth:18,hitBoxHeight:30,totalFrames:109,friction:.08,frictionAir:.001,mass:40,bounce:.015,maxSpeed:8,jumpForce:1.7,accelerationForce:.067,accelerationForceAir:.015,scale:2,minTimeBetweenJumpsMs:700,meleeAttack:{width:18,height:20,damage:35,thrustForce:.015,animationKey:50,deltaX:0,deltaY:0,types:["slash","melee"]},createAnimations:function(e){return[{key:"still",frames:e.anims.generateFrameNumbers("player",{start:0,end:1}),yoyo:!0,frameRate:1,repeatDelay:3e3,delay:1e3,repeat:-1},{key:"running",frames:e.anims.generateFrameNumbers("player",{start:8,end:13}),frameRate:10,repeat:-1},{key:"in-air-up",frames:e.anims.generateFrameNumbers("player",{start:16,end:18}),repeat:-1},{key:"in-air-falling",frames:e.anims.generateFrameNumbers("player",{start:22,end:23}),repeat:-1},{key:"melee-attack",frames:e.anims.generateFrameNumbers("player",{start:48,end:52}),frameRate:14,repeat:0}]}},k={spriteSheet:"./assets/test-dummy.png",width:50,height:80,hitBoxWidth:50,hitBoxHeight:94,totalFrames:4,friction:.07,frictionAir:.002,mass:50,bounce:.015,maxSpeed:8,jumpForce:1.7,accelerationForce:.07,accelerationForceAir:.002,scale:1,minTimeBetweenJumpsMs:700,meleeAttack:{width:50,height:50,deltaX:0,deltaY:15,damage:35,thrustForce:.025,animationKey:1,types:["melee"]},createAnimations:function(e){return[{key:"still",frames:e.anims.generateFrameNumbers("test_dummy",{start:0,end:3}),yoyo:!0,frameRate:1,repeatDelay:3e3,delay:500,repeat:-1},{key:"running",frames:e.anims.generateFrameNumbers("test_dummy",{start:0,end:1}),frameRate:10,repeat:-1},{key:"in-air-up",frames:e.anims.generateFrameNumbers("test_dummy",{start:1,end:1}),repeat:-1},{key:"in-air-falling",frames:e.anims.generateFrameNumbers("test_dummy",{start:1,end:1}),repeat:-1},{key:"melee-attack",frames:e.anims.generateFrameNumbers("test_dummy",{start:0,end:1}),frameRate:14,repeat:0}]}},S=function(e){switch(e){case"adventure-guy":return v;case"bingo":return k;default:return v}},w=S("bingo"),x=.5,F="on-ground",z="still",B="moving",A="in-air",D="left-facing",j="right-facing",_="falling",H="melee-attacking",R={type:["player","character","collidable"],state:new Set([]),status:{health:100,maxHealth:100,level:1,xp:0},cursors:{},playerSprite:{},hitBox:{},meleeButtonReleased:!0,lastJumpTimeStamp:0,jumpButtonReleased:!0,init:function(e){var t=this;this.gameWorld=e,this.hitBox=e.matter.bodies.rectangle(0,0,w.hitBoxWidth*w.scale,w.hitBoxHeight*w.scale),this.hitBox.zetParent=this,this.debugFeetRectangle=e.matter.bodies.rectangle(0,w.hitBoxHeight/2*w.scale,(w.hitBoxWidth-2)*w.scale,2*w.scale,{isSensor:!0}),this.meleeAttackHitBoxRight=e.matter.bodies.rectangle(w.meleeAttack.deltaX+30,w.meleeAttack.deltaY,w.meleeAttack.width*w.scale,w.meleeAttack.height*w.scale,{isSensor:!0}),this.meleeAttackHitBoxLeft=e.matter.bodies.rectangle(-30-w.meleeAttack.deltaX,w.meleeAttack.deltaY,w.meleeAttack.width*w.scale,w.meleeAttack.height*w.scale,{isSensor:!0});var a=e.matter.body.create({parts:[this.hitBox,this.debugFeetRectangle,this.meleeAttackHitBoxLeft,this.meleeAttackHitBoxRight]});this.playerSprite=e.matter.add.sprite(0,0,"player").setScale(w.scale),this.playerSprite.body.zetParent=this,this.playerSprite.setExistingBody(a),this.playerSprite.setOrigin(.5,.6),this.playerSprite.setFriction(w.friction),this.playerSprite.setFrictionAir(w.frictionAir),this.playerSprite.setFixedRotation(),this.playerSprite.setMass(w.mass),this.playerSprite.setBounce(w.bounce),this.playerSprite.setPosition(200,110),this.playerSprite.on("animationupdate-melee-attack",(function(e,a,s){a.textureFrame===w.meleeAttack.animationKey&&t.checkAttackInteraction(t.gameWorld),a.isLast&&t.state.delete(H)}),this),this.playerSprite.on("animationcomplete",(function(e,a){"melee-attack"===e.key&&(t.checkAttackInteraction(t.gameWorld),t.state.delete(H))}),this),this.playerSprite.on("animationstart-melee-attack",(function(t,a){e.fxFactory["sword-swing"].play()}),this),this.cursors=e.input.keyboard.createCursorKeys(),w.createAnimations(e).forEach((function(t){e.anims.create(t)}))},onGameUpdate:function(e){var t=Math.abs(this.getVelocity().x),a=Math.abs(this.getVelocity().y);this.processCurrentPlayerState(e,{absVelocityX:t,absVelocityY:a}),this.processInput({absVelocityX:t}),this.setPlayerAnimations(e,{absVelocityX:t})},onCollide:function(e){e.zData&&e.zData.zType.includes("edible")&&e.gameObject&&(e.gameObject.destroy(),this.status.xp=this.status.xp+1)},getVelocity:function(){return this.playerSprite&&this.playerSprite.body&&this.playerSprite.body.velocity?this.playerSprite.body.velocity:{x:0,y:0}},getPlayerStats:function(){return{STATE:Object(g.a)(this.state).join(","),STATUS:this.status,SPEED:"X:"+this.getVelocity().x+",Y:"+this.getVelocity().y}},tryJump:function(){this.state.has(F)&&this.lastJumpTimeStamp<window.performance.now()-w.minTimeBetweenJumpsMs&&this.jumpButtonReleased&&(this.lastJumpTimeStamp=window.performance.now(),this.jumpButtonReleased=!1,this.playerSprite.thrustLeft(w.jumpForce))},tryMeleeAttack:function(){this.meleeButtonReleased&&(this.state.add(H),this.meleeButtonReleased=!1)},tryMove:function(e,t){var a=this.state.has(A);e.absVelocityX<w.maxSpeed&&("right"===t?this.playerSprite.thrust(a?w.accelerationForceAir:w.accelerationForce):this.playerSprite.thrustBack(a?w.accelerationForceAir:w.accelerationForce),this.state.delete("right"===t?D:j),this.state.add("right"===t?j:D),this.state.add(B))},setPlayerAnimations:function(e,t){this.state.has(H)?this.playerSprite.anims.play("melee-attack",!0):this.state.has(A)?this.state.has(_)?this.playerSprite.anims.play("in-air-falling",!0):this.playerSprite.anims.play("in-air-up",!1):this.state.has(F)&&(this.state.has(B)?this.playerSprite.anims.play("running",!0):this.playerSprite.anims.play("still",!0)),this.playerSprite.flipX=this.state.has(D),this.state.has(B)&&!this.state.has(H)?this.playerSprite.anims.setTimeScale(Math.max(t.absVelocityX/4,.5)):this.playerSprite.anims.setTimeScale(1)},processInput:function(e){this.cursors.space.isDown?this.tryMeleeAttack():this.cursors.left.isDown?this.tryMove(e,"left"):this.cursors.right.isDown&&this.tryMove(e,"right"),this.cursors.up.isDown&&this.tryJump(),this.jumpButtonReleased=this.cursors.up.isUp,this.meleeButtonReleased=this.cursors.space.isUp},processCurrentPlayerState:function(e,t){this.checkPlayerInteractions(e),t.absVelocityX>x||t.absVelocityY>x?(this.state.delete(z),this.state.add(B),this.getVelocity().y>x&&this.state.has(A)?this.state.add(_):this.state.delete(_)):(this.state.delete(B),this.state.has(A)||this.state.add(z))},checkPlayerInteractions:function(e){var t=this,a={onGround:!1};return e.children.list.forEach((function(e){e.body&&e.body.zData&&e.body.parts&&e.body.parts.forEach((function(s){s.calcRect=new b(s.bounds.min.x,s.bounds.min.y,s.bounds.max.x-s.bounds.min.x,s.bounds.max.y-s.bounds.min.y),e.body.zData.zType.includes("dead-object")&&s.calcRect.intersectsBounds(t.debugFeetRectangle.bounds)&&(a.onGround=!0)}))})),a.onGround?(this.state.add(F),this.state.delete(A)):(this.state.delete(F),this.state.add(A)),a},checkAttackInteraction:function(e){var t=this;this.state.has(H)&&e.children.list.forEach((function(a){a.body&&a.body.zData&&a.body.zData.zType.includes("melee-vulnerable")&&a.body.parts&&a.body.parts.forEach((function(s){if(t.state.has(D)?s.calcRect.intersectsBounds(t.meleeAttackHitBoxLeft.bounds):s.calcRect.intersectsBounds(t.meleeAttackHitBoxRight.bounds)){console.log("Player whacked: ",s,a),e.fxFactory["hit-ball"].play(),t.status.xp=t.status.xp+1;var i={thrustForce:w.meleeAttack.thrustForce,damage:w.meleeAttack.damage,types:w.meleeAttack.damage.types};t.state.has(D)?i.angle=225:i.angle=135,a.body.zData.onDamage&&a.body.zData.onDamage(i)}}))}))}};var T=S("adventure-guy"),O=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this,{key:"level-1-1",active:!0}))).objectFactory=function(e){var t=this;return{_:{preLoad:function(){e.load.spritesheet("virus_ball","./assets/sprites/virus_ball_multi.png",{frameWidth:32,frameHeight:32}),e.load.spritesheet("blue_demon","./assets/sprites/enemies/blue-demon/demon-idle.png",{frameWidth:160,frameHeight:144}),e.load.spritesheet("blue_slime","./assets/sprites/enemies/blue-slime.png",{frameWidth:32,frameHeight:25}),e.load.spritesheet("test_dummy","./assets/sprites/test-dummy.png",{frameWidth:150,frameHeight:96})},load:function(){[{key:"virus-ball-healthy",frames:e.anims.generateFrameNumbers("virus_ball",{start:0,end:0}),repeat:0},{key:"virus-ball-damaged",frames:e.anims.generateFrameNumbers("virus_ball",{start:1,end:1}),repeat:0},{key:"virus-ball-destroy",frames:e.anims.generateFrameNumbers("virus_ball",{start:1,end:5}),frameRate:15,repeat:0,delay:100},{key:"blue-slime-idle",frames:e.anims.generateFrameNumbers("blue_slime",{start:0,end:3}),repeat:-1,frameRate:7},{key:"blue-slime-moving",frames:e.anims.generateFrameNumbers("blue_slime",{start:4,end:7}),repeat:-1,frameRate:7},{key:"blue-slime-attacking",frames:e.anims.generateFrameNumbers("blue_slime",{start:8,end:11}),repeat:0,frameRate:7},{key:"blue-slime-hurt",frames:e.anims.generateFrameNumbers("blue_slime",{start:12,end:15}),repeat:0,frameRate:7},{key:"blue-slime-destroy",frames:e.anims.generateFrameNumbers("blue_slime",{start:16,end:19}),repeat:0,frameRate:7},{key:"blue-slime-dead",frames:e.anims.generateFrameNumbers("blue_slime",{start:20,end:20}),repeat:-1,frameRate:7},{key:"blue_demon-idle",frames:e.anims.generateFrameNumbers("blue_demon",{start:0,end:5}),repeat:-1,frameRate:7},{key:"test_dummy-idle",frames:e.anims.generateFrameNumbers("test_dummy",{start:0,end:3}),repeat:-1,frameRate:1}].forEach((function(t){return e.anims.create(t)}))},createInteractiveBall:function(a,s,i,r,n){var l=e.matter.add.sprite(a,s,"virus_ball",null,{isStatic:!0});return l.setCircle(i),l.setFriction(.2,.001,.2),l.setMass(10),l.setDensity(.03),l.setBounce(.5),l.setFriction(.4,.01,.4),l.anims.play("virus-ball-healthy",!0),l.on("animationcomplete",(function(e,t){"virus-ball-destroy"===e.key&&l.destroy()}),t),l.body.zData={zType:["dead-object","melee-vulnerable"],zHealth:n,onDamage:function(e){console.log("Ball got damage. ",e,l.body.zData.zHealth),l.body.zData.zHealth<0?l.anims.play("virus-ball-destroy",!0):l.anims.play("virus-ball-damaged",!0),l.body.zData.zHealth=l.body.zData.zHealth-e.damage,e.angle&&e.thrustForce&&(e.angle<180?(l.angle=e.angle,l.thrustBack(e.thrustForce)):(l.angle=e.angle,l.thrust(e.thrustForce)))}},l},spawnBlueSlime:function(a,s,i){var r=e.matter.add.sprite(a,s,"blue_slime",null,{isStatic:!0},{scale:{x:2,y:2},density:.9,mass:40,friction:.8});return console.log("Spawning blue slime at ",a,s),r.scale=2,r.setRectangle(60,30),r.setOrigin(.5,.7),r.setFriction(1,.01,1),r.setMass(120),r.setDensity(.9),r.setBounce(.3),console.log("blue body",r.body),r.anims.play("blue-slime-idle",!0),r.on("animationcomplete",(function(e,t){"blue-slime-destroy"===e.key?r.destroy():"blue-slime-hurt"===e.key&&r.anims.play("blue-slime-idle")}),t),r.body.zData={zType:["dead-object","melee-vulnerable"],zHealth:i,onDamage:function(e){console.log("Blue Slime got damage. ",e,r.body.zData.zHealth),r.body.zData.zHealth<0?r.anims.play("blue-slime-destroy",!0):r.anims.play("blue-slime-hurt",!0),r.body.zData.zHealth=r.body.zData.zHealth-e.damage,e.angle&&e.thrustForce&&(e.angle<180?(r.angle=e.angle,r.thrustBack(e.thrustForce)):(r.angle=e.angle,r.thrust(e.thrustForce)))},onGameUpdate:function(e){r.angle=0}},r},createStaticEnemy:function(a,s,i,r){var n=e.matter.add.sprite(a,s,i,null,{isStatic:!0});return n.anims.play("".concat(i,"-idle"),!0),n.on("animationcomplete-".concat(i,"-destroy"),(function(e,t){n.destroy()}),t),n.body.zData={zType:["melee-vulnerable","enemy","dead-object"],zHealth:r,onDamage:function(e){n.body.zData.zHealth<0?n.anims.play("".concat(i,"-destroy"),!0):n.anims.play("".concat(i,"-damaged"),!0),n.body.zData.zHealth=n.body.zData.zHealth-e.damage,console.log("enemy got hit! Health left:",n.body.zData.zHealth),e.angle&&e.thrustForce}},n}}}}(Object(y.a)(e)),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"preload",value:function(){console.log("Loading World 1-1 resources"),this.load.audio("sword-swing","./assets/sounds/sword-swing-3.mp3"),this.load.audio("hit-ball","./assets/sounds/hit-slime.wav"),this.load.image("ground","./assets/world/grounds/debug_ground.png"),this.load.image("tileset","./assets/world/grounds/old-dark-castle-interior-tileset.png"),this.load.image("stone_ground","./assets/world/grounds/stone_ground.png"),this.load.image("background","./assets/world/grounds/background_1.png"),this.objectFactory._.preLoad(),this.load.spritesheet("player",T.spriteSheet,{frameWidth:T.width,frameHeight:T.height},null,T.totalFrames)}},{key:"create",value:function(){this.objectFactory._.load(),this.matter.world.setBounds(0,-500,1600,1300),this.add.tileSprite(800,700,1600,160,"background"),this.createGround("stone_ground",this.game.canvas.width/2,796,this.game.canvas.width,21),console.log("sound: ",this.sound),this.sound.audioPlayDelay=0,this.fxFactory={"sword-swing":new Audio("./assets/sounds/sword-swing-3.mp3"),"hit-ball":new Audio("./assets/sounds/hit-ball.wav")};for(var e=f(5,10),t=0;t<e;t++);this.createGround("stone_ground",300,750,100,120),this.createGround("stone_ground",500,650,80,40),this.createGround("stone_ground",700,750,100,120),console.log("Created World 1-1, starting to spawn virus balls"),this.time.addEvent({delay:3250,callback:this.createBall.bind(this),callbackScope:this,repeat:4012}),console.log("Created World 1-1, adding player"),this.player=Object.create(R),this.player.init(this),this.matter.world.on("collisionstart",(function(e){e.pairs.forEach((function(e){var t=e.bodyA,a=e.bodyB;t.zetParent&&t.zetParent.type.includes("collidable")?t.zetParent.onCollide(a):a.zetParent&&a.zetParent.type.includes("collidable")&&a.zetParent.onCollide(t)}))})),console.log("Created World 1-1, adding a static enemy"),this.objectFactory._.createStaticEnemy(this.game.canvas.width-150,this.game.canvas.height-200,"test_dummy",500)}},{key:"createGround",value:function(e,t,a,s,i){var r=this.add.tileSprite(t,a,s,i,e);return this.matter.add.gameObject(r,{isStatic:!0,render:{sprite:{}}}).setStatic(!0),r.body.zData={zType:["dead-object"]},r}},{key:"createBall",value:function(){return 1===f(1,3)?this.objectFactory._.spawnBlueSlime(f(100,800),-100,10):this.objectFactory._.createInteractiveBall(f(100,800),-100,10,"virus_ball",100)}},{key:"update",value:function(){var e=this;this.player.onGameUpdate(this),this.children&&this.children.list.forEach((function(t){var a,s;(null===t||void 0===t||null===(a=t.body)||void 0===a||null===(s=a.zData)||void 0===s?void 0:s.onGameUpdate)&&t.body.zData.onGameUpdate(e)}))}}]),t}(l.Scene),E=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this,{key:"boot",active:!0}))).loadingImage=null,e.clickHandler.bind(Object(y.a)(e)),e}return Object(p.a)(t,e),Object(h.a)(t,[{key:"preload",value:function(){this.load.image("bar","./assets/loading.png")}},{key:"create",value:function(){this.loadingImage=this.add.image(this.game.canvas.width/2,300,"bar"),this.loadingImage.setInteractive(),this.loadingImage.on("pointerup",this.clickHandler,this)}},{key:"clickHandler",value:function(){console.log("logo cliecked!"),this.scene.add("level-1-1",O,!0,{x:0,y:0}),this.scene.remove(this)}},{key:"update",value:function(){var e=this.loadingImage.width/2;this.loadingImage.x=this.loadingImage.x+5,this.loadingImage.x>this.game.canvas.width+e&&(this.loadingImage.x=0-e)}}]),t}(l.Scene),P=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(u.a)(t).call(this,{key:"stats",active:!0}))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"preload",value:function(){}},{key:"create",value:function(){this.statsInfo=this.add.text(10,20,"Score: 0, Lives: 999",{font:"16px Courier",fill:"#00ff33"}).setDepth(1e3)}},{key:"update",value:function(){var e=this.scene.get("level-1-1");if(e&&e.player&&e.player.getPlayerStats){var t=e.player.getPlayerStats();this.statsInfo.setText(t.STATUS.health+"/"+t.STATUS.maxHealth+" -- LEVEL:"+t.STATUS.level+" -- XP:"+t.STATUS.xp+" -- State:"+t.STATE+" -- Speed:"+t.SPEED)}}}]),t}(l.Scene);a(1484);var I=function(){return Object(s.useEffect)((function(){c("main-canvas",[P,E])}),[]),i.a.createElement("div",null,i.a.createElement("div",{id:"main-canvas"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},560:function(e,t,a){e.exports=a(1485)},565:function(e,t,a){}},[[560,1,2]]]);
//# sourceMappingURL=main.f806159c.chunk.js.map